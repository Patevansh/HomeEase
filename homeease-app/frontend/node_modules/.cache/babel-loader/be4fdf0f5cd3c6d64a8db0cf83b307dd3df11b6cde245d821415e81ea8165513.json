{"ast":null,"code":"import _objectSpread from\"/mnt/53B95BA73C164FFE/HomeEase/homeease-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const useCart=()=>{const context=useContext(CartContext);if(!context){throw new Error('useCart must be used within a CartProvider');}return context;};export const CartProvider=_ref=>{let{children}=_ref;const[cartItems,setCartItems]=useState([]);const[isCartOpen,setIsCartOpen]=useState(false);// Load cart from localStorage on mount\nuseEffect(()=>{const savedCart=localStorage.getItem('homeease_cart');if(savedCart){try{setCartItems(JSON.parse(savedCart));}catch(error){console.error('Error loading cart from localStorage:',error);}}},[]);// Save cart to localStorage whenever it changes\nuseEffect(()=>{localStorage.setItem('homeease_cart',JSON.stringify(cartItems));},[cartItems]);const addToCart=service=>{setCartItems(prevItems=>{// Check if item already exists\nconst existingItem=prevItems.find(item=>item._id===service._id);if(existingItem){toast.error('Item already in cart!');return prevItems;}toast.success(\"\".concat(service.name,\" added to cart!\"));return[...prevItems,_objectSpread(_objectSpread({},service),{},{quantity:1})];});};const removeFromCart=serviceId=>{setCartItems(prevItems=>{const updatedItems=prevItems.filter(item=>item._id!==serviceId);toast.success('Item removed from cart');return updatedItems;});};const updateQuantity=(serviceId,quantity)=>{if(quantity<1){removeFromCart(serviceId);return;}setCartItems(prevItems=>prevItems.map(item=>item._id===serviceId?_objectSpread(_objectSpread({},item),{},{quantity}):item));};const clearCart=()=>{setCartItems([]);localStorage.removeItem('homeease_cart');};const getTotalItems=()=>{return cartItems.reduce((total,item)=>total+item.quantity,0);};const getTotalPrice=()=>{return cartItems.reduce((total,item)=>total+item.price*item.quantity,0);};const isInCart=serviceId=>{return cartItems.some(item=>item._id===serviceId);};const toggleCart=()=>{setIsCartOpen(!isCartOpen);};const closeCart=()=>{setIsCartOpen(false);};const openCart=()=>{setIsCartOpen(true);};const value={cartItems,isCartOpen,addToCart,removeFromCart,updateQuantity,clearCart,getTotalItems,getTotalPrice,isInCart,toggleCart,closeCart,openCart};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","toast","jsx","_jsx","CartContext","useCart","context","Error","CartProvider","_ref","children","cartItems","setCartItems","isCartOpen","setIsCartOpen","savedCart","localStorage","getItem","JSON","parse","error","console","setItem","stringify","addToCart","service","prevItems","existingItem","find","item","_id","success","concat","name","_objectSpread","quantity","removeFromCart","serviceId","updatedItems","filter","updateQuantity","map","clearCart","removeItem","getTotalItems","reduce","total","getTotalPrice","price","isInCart","some","toggleCart","closeCart","openCart","value","Provider"],"sources":["/mnt/53B95BA73C164FFE/HomeEase/homeease-app/frontend/src/contexts/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport toast from 'react-hot-toast';\n\nconst CartContext = createContext();\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n\nexport const CartProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState([]);\n  const [isCartOpen, setIsCartOpen] = useState(false);\n\n  // Load cart from localStorage on mount\n  useEffect(() => {\n    const savedCart = localStorage.getItem('homeease_cart');\n    if (savedCart) {\n      try {\n        setCartItems(JSON.parse(savedCart));\n      } catch (error) {\n        console.error('Error loading cart from localStorage:', error);\n      }\n    }\n  }, []);\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('homeease_cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  const addToCart = (service) => {\n    setCartItems(prevItems => {\n      // Check if item already exists\n      const existingItem = prevItems.find(item => item._id === service._id);\n      \n      if (existingItem) {\n        toast.error('Item already in cart!');\n        return prevItems;\n      }\n\n      toast.success(`${service.name} added to cart!`);\n      return [...prevItems, { ...service, quantity: 1 }];\n    });\n  };\n\n  const removeFromCart = (serviceId) => {\n    setCartItems(prevItems => {\n      const updatedItems = prevItems.filter(item => item._id !== serviceId);\n      toast.success('Item removed from cart');\n      return updatedItems;\n    });\n  };\n\n  const updateQuantity = (serviceId, quantity) => {\n    if (quantity < 1) {\n      removeFromCart(serviceId);\n      return;\n    }\n\n    setCartItems(prevItems =>\n      prevItems.map(item =>\n        item._id === serviceId ? { ...item, quantity } : item\n      )\n    );\n  };\n\n  const clearCart = () => {\n    setCartItems([]);\n    localStorage.removeItem('homeease_cart');\n  };\n\n  const getTotalItems = () => {\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\n  };\n\n  const getTotalPrice = () => {\n    return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);\n  };\n\n  const isInCart = (serviceId) => {\n    return cartItems.some(item => item._id === serviceId);\n  };\n\n  const toggleCart = () => {\n    setIsCartOpen(!isCartOpen);\n  };\n\n  const closeCart = () => {\n    setIsCartOpen(false);\n  };\n\n  const openCart = () => {\n    setIsCartOpen(true);\n  };\n\n  const value = {\n    cartItems,\n    isCartOpen,\n    addToCart,\n    removeFromCart,\n    updateQuantity,\n    clearCart,\n    getTotalItems,\n    getTotalPrice,\n    isInCart,\n    toggleCart,\n    closeCart,\n    openCart,\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}